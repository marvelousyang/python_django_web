<html>
    <head>
        <title>
        </title>
        <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
        <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
            integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
            crossorigin="anonymous">
        <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css"
            integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
            crossorigin="anonymous">
        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>            
        <script type="text/JavaScript">


        $(function(){
            $("#file").change(function(){
                var file = this.files[0];
                alert("文件大小:"+(file.size / 1024).toFixed(1)+"kB");
                if (window.FileReader) {
                    var reader = new FileReader();
                    reader.readAsDataURL(file);
                    //监听文件读取结束后事件
                    reader.onloadend = function (e) {
                        showXY(e.target.result,file.fileName);
                    };
                }
            });
        });
        function showXY(source){
            var img = document.getElementById("thumbPic");
            img.src = source;
            alert("Width:"+img.width+", Height:"+img.height);
        }
        function uploadImg() {
            //var file = $("#file")[0].files[0];
            var formData = new FormData();
            formData.append("file",$("#file")[0].files[0]);
            $.ajax({
            //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "text",//预期服务器返回的数据类型
                url: "/uploadImg" ,//url
                data: formData,
                processData: false,
                contentType: false,
                success: function (result) {
                    console.log(result);//打印服务端返回的数据(调试用)
                    if (result.resultCode == 200) {
                        alert("SUCCESS");
                    }
                },
                error : function(xhr,errorInfo,e) {
                    alert("异常！");
                    alert(errorInfo);
                    alert(e);

                }
            });
        }

        
    </script> 

</head>
    
    <body>
        <div class="container theme-showcase">
                <div class="jumbotron">
                        <h1>识别人脸年龄</h1>
                        <p>...</p>
                        <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
                    </div>
                    
                    <h1>请上传文件</h1>
                    <div enctype="multipart/form-data">
                        <input type="file" name="file" id="file"/>
                        <button type="button" onclick="uploadImg()">上传</button>
                    </div>
            
                    <div class="row">
                        <div class="col-xs-6 col-md-3">
                            <a href="#" class="thumbnail">
                            <img id="thumbPic" src="" alt="">
                            </a>
                        </div>
                    </div>
            
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" 
                        aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                            60%
                        </div>
                    </div>
                    <div id="main" style="height:400px"></div>
                    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
                    <script type="text/javascript">
                        // 路径配置
                        require.config({
                            paths: {
                                echarts: 'http://echarts.baidu.com/build/dist'
                            }
                        });
                        // 使用
                        require(
                            [
                                'echarts',
                                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
                            ],
                            function (ec) {
                                // 基于准备好的dom，初始化echarts图表
                                var myChart = ec.init(document.getElementById('main')); 
                                
                                var option = {
                                    tooltip: {
                                        show: true
                                    },
                                    legend: {
                                        data:['年龄段']
                                    },
                                    xAxis : [
                                        {
                                            type : 'category',
                                            data : ['(0, 2)','(4, 6)','(8, 12)','(15, 20)','(25, 32)','(38, 43)','(48, 53)','(60, 100)']
                                        }
                                    ],
                                    yAxis : [
                                        {
                                            type : 'value'
                                        }
                                    ],
                                    series : [
                                        {
                                            "name":"销量",
                                            "type":"bar",
                                            "data":[0, 0, 0, 0, 0, 0, 0, 0]
                                        }
                                    ]
                                };
                        
                                // 为echarts对象加载数据 
                                myChart.setOption(option); 
                            }
                        );
                    </script>
        </div>
       
    </body>
</html>